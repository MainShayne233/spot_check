.container
  - if @spotcheck.checker.id == current_user.id
    = link_to 'Delete Spotcheck', spotcheck_path, method: :delete, class: 'btn btn-danger pull-right', data: spotcheck_delete_confirm
  %h1.inline= @spotcheck.title

  - if @spotcheck.checker.id == current_user.id
    = link_to 'Create New Spot', '#', class: 'btn btn-default pull-right', id: 'create_new_spot'

.container
  - @spotcheck.assignees.order(:last_name).each do |assignee|
    .row
      .col-md-4
        %h4= assignee.formal_name
      .col-md-4{id: "total_hours_#{assignee.id}"}
        Total Hours:
        = assignee.total_hours(@spotcheck)
    %table.table.table-bordered.table-striped.spot_table
      %thead
        %tr
          %th Activity:
          %th Hours Worked:
          %th Hours Left:
          %th Work Accomplished:
          - if @spotcheck.checker == current_user
            %th.delete_column Delete:
      %tbody
      - assignee.spots_from(@spotcheck).each do |spot|
        %tr.spot_row
          %td.activity_title= spot.title
          %td.hours_worked_column
            - if [spot.assignee.id, @spotcheck.checker.id].include? current_user.id
              %input.form-control.hours_worked.num-input.select{value: "#{spot.hours_worked}",
                                                               maxlength: 5,
                                                               type: 'text',
                                                               id: spot.id,
                                                               assignee_id: assignee.id}
            -else
              .center.center-text= spot.hours_worked
          %td.hours_left_column
            - if @spotcheck.checker.id == current_user.id
              %input.form-control.hours_left.num-input.select{value: "#{spot.hours_left}",
                                                              maxlength: 5,
                                                              type: 'text',
                                                              id: spot.id}
            - else
              .center.center-text= spot.hours_left
          %td.work_accomplished_column
            - if [spot.assignee.id, @spotcheck.checker.id].include? current_user.id
              %textarea.form-control.work_accomplished{id: spot.id, rows: 3}
                = spot.work_accomplished
            - else
              = spot.work_accomplished
          - if @spotcheck.checker == current_user
            %td.delete_column= link_to '', '#', class: 'btn btn-danger glyphicon glyphicon-trash delete_spot'

  - if @spotcheck.spots.blank?
    %h4 This spotcheck currently has no spots


= render 'spots/form'